"use strict";var option=document.getElementById("selectMenu"),targetElement=document.getElementsByClassName("flex-row")[0],ProductsModel=function(t){this.XMLHttpRequest=t};ProductsModel.prototype.getProducts=function(t){var e=new this.XMLHttpRequest;e.onload=function(e){var o=JSON.parse(e.currentTarget.responseText);t(o)},e.open("GET","https://familyburger.com.ua/products.json",!0),e.send()};var ProductsView=function(t,e){this.element=t,this.select=e,this.onChangeGetProduct=null};ProductsView.prototype.render=function(t){var e,o,n,i,s=!0,r=this,c=[],d=[],l=[],u=[],a=t.length,h=document.getElementsByClassName("loader")[0],p=this.select.options[this.select.selectedIndex].value;for(this.element.innerHTML="",h.classList.remove("contentLoaded"),e=0;e<a;e++)t[e].type===p&&(s&&(i=e,s=!1),this.element.innerHTML+='<div class="item-img"><a href="#modal-fullscreen" data-toggle="modal"><h1 class="notify-badge">'+t[e].name+'</h1><img src="images/menuLowQuality/img-'+(e+1)+'.png"alt="'+t[e].name+'"></a></div>',c.push(new Image),d.push(t[e].name),l.push(t[e].price),u.push(t[e].description));for(a=(n=Array.prototype.slice.call(document.querySelectorAll(".container .item-img"))).length,o=0;o<a;o++)c[o].src="./images/menuHighQuality/img-"+(i+o+1)+".png",n[o].addEventListener("click",function(){r.onClickShowDescription(n.indexOf(this)+i,l[n.indexOf(this)],d[n.indexOf(this)],u[n.indexOf(this)])});this.select.addEventListener("change",function(){r.onChangeGetProducts(t)}),c[o-1].addEventListener("load",function(){h.classList.add("contentLoaded")}),$(".notify-badge").arctext({radius:300})},ProductsView.prototype.showItemDescription=function(t,e,o){var n=document.getElementsByClassName("description")[0],i=document.getElementsByClassName("product-img")[0];n.innerHTML="<b>"+e+"</b><br>"+o,i.style.backgroundImage='url("images/menuHighQuality/img-'+(t+1)+'.png")'},ProductsView.prototype.slideDown=function(t){var e=document.getElementsByClassName("ribbon")[0],o=25,n=setInterval(function(){50>o?(o+=.5,e.style.height=o+"%"):(e.style.height=o+"%",clearInterval(n),n=null)},25);e.innerHTML=t};var ProductsController=function(t,e){this.productsModel=t,this.productsView=e};ProductsController.prototype.initialize=function(){this.productsModel.getProducts(this.onLoadShowProducts.bind(this)),this.productsView.onChangeGetProducts=this.onChangeGetProducts.bind(this),this.productsView.onClickShowDescription=this.onClickShowDescription.bind(this)},ProductsController.prototype.onLoadShowProducts=function(t){this.productsView.render(t)},ProductsController.prototype.onChangeGetProducts=function(t){this.productsView.render(t)},ProductsController.prototype.onClickShowDescription=function(t,e,o,n){this.productsView.showItemDescription(t,o,n),this.productsView.slideDown(e)},function(){var t=new ProductsModel(XMLHttpRequest),e=new ProductsView(targetElement,option);new ProductsController(t,e).initialize()}();